---
import SproutIcon from "./SproutIcon.astro";
import BranchDecor from "./BranchDecor.astro";
---

<footer class="border-t-4 border-brown py-6 bg-cream-dark relative overflow-hidden">
  <!-- Botanical accent -->
  <div class="absolute bottom-[-20px] left-[6%] opacity-15 pointer-events-none" style="transform: rotate(170deg);">
    <BranchDecor size={140} variant={4} class="text-[var(--terracotta)]" />
  </div>

  <div class="mx-auto max-w-6xl px-6 relative z-10">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <SproutIcon size={24} />
        <span class="font-display text-xl text-brown font-bold">Holophyte</span>
      </div>

      <div id="theme-switcher" class="flex items-center gap-1">
        <button data-theme="coral" class="active"><span class="swatch" style="background:#2E6E5E"></span><span class="swatch" style="background:#E06858"></span><span class="swatch" style="background:#F0A87A"></span></button>
        <button data-theme="terracotta"><span class="swatch" style="background:#5A6D5A"></span><span class="swatch" style="background:#D97D54"></span><span class="swatch" style="background:#E8B44D"></span></button>
      </div>

      <div class="flex items-center gap-4">
        <p class="font-display text-sm text-muted tracking-wide">MADE BY KO</p>
        <div class="h-4 w-px bg-brown/20"></div>
        <p class="text-sm text-muted">2026</p>
      </div>
    </div>
  </div>
</footer>

<style>
  #theme-switcher button {
    padding: 4px 8px;
    border: 1px solid transparent;
    border-radius: 6px;
    background: transparent;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 4px;
  }

  #theme-switcher button:hover {
    border-color: var(--brown-light);
  }

  #theme-switcher button.active {
    border-color: var(--brown);
  }

  .swatch {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
  }
</style>

<script>
  const themes: Record<string, Record<string, string>> = {
    coral: {
      '--cream': '#FAF7F4',
      '--cream-dark': '#F0ECE8',
      '--sage': '#2E6E5E',
      '--sage-dark': '#1A5245',
      '--terracotta': '#E06858',
      '--brown': '#3A2E2A',
      '--brown-light': '#6A5550',
      '--text': '#1A1512',
      '--text-muted': '#6A5550',
      '--accent-yellow': '#F0A87A',
    },
    terracotta: {
      '--cream': '#F9F6F0',
      '--cream-dark': '#F0EBE3',
      '--sage': '#5A6D5A',
      '--sage-dark': '#3F4F3F',
      '--terracotta': '#D97D54',
      '--brown': '#3D2817',
      '--brown-light': '#6B4E37',
      '--text': '#1A1512',
      '--text-muted': '#645A52',
      '--accent-yellow': '#E8B44D',
    },
  };

  const root = document.documentElement;
  const buttons = document.querySelectorAll('#theme-switcher button');

  buttons.forEach((btn) => {
    btn.addEventListener('click', () => {
      const themeName = (btn as HTMLElement).dataset.theme!;
      const theme = themes[themeName];

      for (const [prop, value] of Object.entries(theme)) {
        root.style.setProperty(prop, value);
      }

      buttons.forEach((b) => b.classList.remove('active'));
      btn.classList.add('active');
    });
  });
</script>
